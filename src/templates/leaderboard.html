{% extends "base.html" %}

{% block title %}Hall of Fame{% endblock %}

{% block content %}
<div class="column is-9">
    <div class="box p-6">
        <div class="columns is-vcentered mb-5">
            <div class="column">
                <h1 class="title is-2 mb-2">Hall of Fame</h1>
                <p class="subtitle is-5 has-text-grey">
                    Top scores for: {{game_name}} <br class="mb-5"/>
                    <span class="ml-2">
                        <a href="{{ url_for('games.leaderboard_all') }}" class="tag {{ 'is-dark' if game_name == 'All' else 'is-light' }}">
                            <span class="icon"><i class="fas fa-list"></i></span>
                            <span>All</span>
                        </a>
                    </span>
                    <span class="ml-2">
                        <a href="{{ url_for('games.leaderboard', game_name='coin_toss') }}" class="tag {{ 'is-dark' if game_name == 'COIN TOSS' else 'is-light' }}">
                            <span class="icon"><i class="fas fa-coins"></i></span>
                            <span>Coin Toss</span>
                        </a>
                    </span>
                    <span class="ml-2">
                        <a href="{{ url_for('games.leaderboard', game_name='rock_paper_scissors') }}" class="tag {{ 'is-dark' if game_name == 'ROCK PAPER SCISSORS' else 'is-light' }}">
                            <span class="icon"><i class="fas fa-hand-paper"></i></span>
                            <span>RPS</span>
                        </a>
                    </span>
                    <span class="ml-2">
                        <a href="{{ url_for('games.leaderboard', game_name='spin_the_wheel') }}" class="tag {{ 'is-dark' if game_name == 'SPIN THE WHEEL' else 'is-light' }}">
                            <span class="icon"><i class="fas fa-dice"></i></span>
                            <span>Spin</span>
                        </a>
                    </span>

                </p>
            </div>
            <div class="column is-narrow has-text-centered">
                <span class="icon is-large has-text-warning">
                    <i class="fas fa-crown fa-3x"></i>
                </span>
            </div>
        </div>

        {% if top_players %}
        <div class="table-container">
            <table class="table is-fullwidth is-striped">
                <thead>
                    <tr>
                        <th class="has-text-centered">Rank</th>
                        <th>Player Name</th>
                        <th class="has-text-centered">Score</th>
                        {% if game_name == "All" %}
                        <th>Game</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for player in top_players %}
                    <tr class="rank-{{ loop.index if loop.index <= 3 else 'other' }}">
                        <td class="has-text-centered has-text-weight-bold">
                            {% if loop.index == 1 %}
                                <span class="icon has-text-warning"><i class="fas fa-medal"></i></span>
                            {% elif loop.index == 2 %}
                                <span class="icon has-text-grey-light"><i class="fas fa-medal"></i></span>
                            {% elif loop.index == 3 %}
                                <span class="icon" style="color:#cd7f32;"><i class="fas fa-medal"></i></span>
                            {% else %}
                                {{ loop.index }}
                            {% endif %}
                        </td>
                        <td>
                            <div class="is-flex is-align-items-center">
                                <figure class="image is-24x24 mr-2">
                                    <img class="is-rounded" src="https://ui-avatars.com/api/?name={{player.player_id}}&background=random">
                                </figure>
                                <span style="color: #dddddd;">{{ player.fullname }} <span style="font-size: smaller; color: #cccccc;"><i>@{{ player.username }}</i></span></span>
                            </div>
                        </td>
                        <td class="has-text-centered has-text-weight-bold has-text-success">
                            {{ "{:,}".format(player.max_score) }}
                        </td>
                        {% if game_name == "All" %}
                        <td>{{ player.game_name }}</td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="notification is-light has-text-centered py-6">
            <span class="icon is-large has-text-grey-lighter mb-3">
                <i class="fas fa-ghost fa-3x"></i>
            </span>
            <p class="is-size-5 has-text-grey">No scores recorded yet. Be the first!</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block styles %}
{{ super() }}
<style>
    .table td, .table th { color: #ddd; }
    
</style>
{% endblock %}
