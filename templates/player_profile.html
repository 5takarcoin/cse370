{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block styles %}
{{super()}}
<style>
    .diffcol {
        background: linear-gradient(135deg, #003c47 0%, #00423d 100%);
}
</style>
{% endblock %}


{% block content %}

                    <div class="column is-9">
                            <!-- <div class="{{ 'box p-6 diffcol' if session['username'] != details['username'] else 'box p-6' }}"> -->
                                <div class="box p-6 {% if session.get('username') != details.get('username') %}diffcol{% endif %}">

                            <div class="columns is-vcentered">
                                <div class="column">
                                    <p class="subtitle is-5 has-text-grey">Player Profile Details</p>

                                    <h1 class="title is-2 mb-2 ">
                                        <a class="has-text-white">
                                            {{details['name']}}
                                        </a>
                                    </h1>
                                </div>
                                <div class="column is-narrow">
                                    <figure class="image is-96x96">
                                        <img class="is-rounded" src="https://ui-avatars.com/api/?name={{details['name']}}&size=128&background=48c78e&color=fff" alt="Profile">
                                    </figure>
                                </div>
                            </div>
                            
                            <hr>

                            <div class="columns">
                                <div class="column is-7">
    <div class="">
        <header class="card-header">
            <p class="card-header-title">
                <span class="icon mr-2">
                    <i class="fas fa-id-card"></i>
                </span>
                User Details
            </p>
        </header>

        <div class="card-content">
            <div class="content">
                <ul class="details-list">
                    <li>
                        <strong>Name</strong>
                        <span class="is-pulled-right">
                            {{ details['name'] }}
                        </span>
                    </li>

                    <li>
                        <strong>Age</strong>
                        <span class="is-pulled-right">
                            {{ details['age'] }}
                        </span>
                    </li>

                    <li>
                        <strong>Personal Balance</strong>
                        <span class="is-pulled-right has-text-success has-text-weight-bold">
                            ${{ details['personal_balance'] }}
                        </span>
                    </li>

                    <li>
                        <strong>Bank Balance</strong>
                        <span class="is-pulled-right has-text-info has-text-weight-bold">
                            {{ more_details['bank_balance'] }}
                        </span>
                    </li>

                    <li>
                        <strong>Favourite Game</strong>
                        <span class="is-pulled-right">
                            {{ more_details['fav_game'] }}
                        </span>
                    </li>

                    {% if friends %}
                    <li>
                        <strong>Best Friend</strong>
                        <span class="is-pulled-right">
                            <a href="{{ url_for('player_profile', username=friends[0]['username']) }}"
                               class="has-text-link has-text-weight-semibold">
                                {{ friends[0]['name'] }}
                            </a>
                        </span>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>


                                <div class="column is-5" style="border-left: 2px solid #ffffff11; padding-left:16px; margin-left: 16px;">
                                    <h3 class="title is-4 has-text-weight-bold" >Mutual Friends</h3>
                                    <div class="">
                                        <div class="">
                                            {% for f in mutuals %}
                                            <a href="{{ url_for('player_profile', username=f['username']) }}">
                                                    <div class="is-flex is-align-items-center mb-3">
                                                        <figure class="image is-32x32 mr-3">
                                                            <img class="is-rounded"
                                                                src="https://ui-avatars.com/api/?name={{ f['name'] }}&background=random">
                                                        </figure>

                                                        <div>
                                                            <p class="has-text-weight-bold mb-0">
                                                                {{ f['name'] }}
                                                            </p>
                                                            <p class="is-size-7 has-text-grey">@{{ f['username'] }}</p>
                                                        </div>
                                                    </div></a>
                                            {% else %}
                                                <div class="has-text-centered py-4">
                                                    <p class="has-text-grey-light italic">No mutual friends found</p>

                                                    <div class="mt-4"></div>

                                                    {% if session['username'] != details['username'] %}
                                                        <a href="{{ url_for('player_profile', username=session['username']) }}" 
                                                        class="button is-small is-info is-light is-fullwidth mt-2 mutual-link">
                                                            <span class="icon is-small">
                                                                <i class="fas fa-arrow-left"></i>
                                                            </span>
                                                            <span>Back to my profile</span>
                                                        </a>
                                                    {% endif %}
                                                    </div>
                                            {% endfor %}
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    
{% endblock %}